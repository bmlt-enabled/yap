{
    "openapi": "3.0.0",
    "info": {
        "title": "Yap API",
        "version": "1.0"
    },
    "paths": {
        "/api/v1/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login to get a Bearer Token",
                "operationId": "19f9cba2ebce1483f9e61aa83e34206d",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "username",
                                    "password"
                                ],
                                "properties": {
                                    "username": {
                                        "type": "string",
                                        "format": "username",
                                        "example": "username"
                                    },
                                    "password": {
                                        "type": "string",
                                        "format": "password",
                                        "example": "password"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "token": {
                                            "type": "string",
                                            "example": "Bearer your_token_here"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Invalid credentials"
                    }
                }
            }
        },
        "/api/v1/user": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Get current authenticated user",
                "description": "Returns the currently authenticated user's information",
                "operationId": "1459f0365c6b55c8b555a775d3bd2e00",
                "responses": {
                    "200": {
                        "description": "Current user information",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "name": {
                                            "type": "string"
                                        },
                                        "username": {
                                            "type": "string"
                                        },
                                        "email": {
                                            "type": "string"
                                        },
                                        "type": {
                                            "type": "string"
                                        },
                                        "is_admin": {
                                            "type": "boolean"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/cache": {
            "post": {
                "tags": [
                    "Cache"
                ],
                "summary": "Clear Cache",
                "description": "Clear Cache",
                "operationId": "Cache",
                "responses": {
                    "200": {
                        "description": "Data Returned",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request"
                    },
                    "404": {
                        "description": "Resource Not Found"
                    }
                }
            }
        },
        "/api/v1/reports/cdr": {
            "get": {
                "tags": [
                    "Reports"
                ],
                "summary": "Get Call Detail Records report",
                "operationId": "212743d161bbe68ebb7c267be8cab799",
                "parameters": [
                    {
                        "name": "service_body_id",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "date_range_start",
                        "in": "query",
                        "description": "Start date for the report range",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_range_end",
                        "in": "query",
                        "description": "End date for the report range",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "recurse",
                        "in": "query",
                        "description": "Whether to include records from child service bodies",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Call Detail Records retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "call_sid": {
                                                "type": "string"
                                            },
                                            "from": {
                                                "type": "string"
                                            },
                                            "to": {
                                                "type": "string"
                                            },
                                            "start_time": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "end_time": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "duration": {
                                                "type": "integer"
                                            },
                                            "status": {
                                                "type": "string"
                                            },
                                            "service_body_id": {
                                                "type": "integer"
                                            },
                                            "volunteer_id": {
                                                "type": "integer",
                                                "nullable": true
                                            },
                                            "volunteer_name": {
                                                "type": "string",
                                                "nullable": true
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/volunteers": {
            "get": {
                "tags": [
                    "Volunteers"
                ],
                "summary": "Get volunteers configuration",
                "operationId": "db6079fd30eb7b5fed73ee557ebc8b1c",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Volunteers configuration retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "service_body_id": {
                                            "type": "integer"
                                        },
                                        "id": {
                                            "type": "integer"
                                        },
                                        "parent_id": {
                                            "type": "integer",
                                            "nullable": true
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Volunteers"
                ],
                "summary": "Store or update volunteers configuration",
                "operationId": "4e5963a41edbaf4189f92506a37c52cd",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "volunteers": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "name": {
                                                    "type": "string"
                                                },
                                                "number": {
                                                    "type": "string"
                                                },
                                                "gender": {
                                                    "type": "string"
                                                },
                                                "responder": {
                                                    "type": "boolean"
                                                },
                                                "type": {
                                                    "type": "string"
                                                },
                                                "language": {
                                                    "type": "array",
                                                    "items": {
                                                        "type": "string"
                                                    }
                                                },
                                                "notes": {
                                                    "type": "string"
                                                },
                                                "shift_info": {
                                                    "type": "object"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Volunteers configuration saved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "service_body_id": {
                                            "type": "integer"
                                        },
                                        "id": {
                                            "type": "integer"
                                        },
                                        "parent_id": {
                                            "type": "integer",
                                            "nullable": true
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/events/status": {
            "get": {
                "tags": [
                    "Events"
                ],
                "summary": "Get all event statuses",
                "operationId": "6c5f582c0ee947c4877a303fece7250f",
                "responses": {
                    "200": {
                        "description": "List of event statuses retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "callsid": {
                                                "type": "string"
                                            },
                                            "event_id": {
                                                "type": "integer"
                                            },
                                            "status": {
                                                "type": "string"
                                            },
                                            "created_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            },
                                            "updated_at": {
                                                "type": "string",
                                                "format": "date-time"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Events"
                ],
                "summary": "Create a new event status",
                "operationId": "410743153504c29a76ad087c9d6e5ea8",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "callsid",
                                    "event_id",
                                    "status"
                                ],
                                "properties": {
                                    "callsid": {
                                        "description": "Call SID",
                                        "type": "string"
                                    },
                                    "event_id": {
                                        "description": "Event ID",
                                        "type": "integer"
                                    },
                                    "status": {
                                        "description": "Status of the event",
                                        "type": "string"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Event status created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "id": {
                                            "type": "integer"
                                        },
                                        "callsid": {
                                            "type": "string"
                                        },
                                        "event_id": {
                                            "type": "integer"
                                        },
                                        "status": {
                                            "type": "string"
                                        },
                                        "created_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        },
                                        "updated_at": {
                                            "type": "string",
                                            "format": "date-time"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "403": {
                        "description": "Unauthorized to create event status"
                    }
                }
            }
        },
        "/api/v1/groups": {
            "get": {
                "tags": [
                    "Groups"
                ],
                "summary": "Get groups for a service body",
                "operationId": "3e63a010ca5ead4c216a420ebcff9fe5",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "manage",
                        "in": "query",
                        "description": "Whether to include management data",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Groups retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "service_body_id": {
                                                "type": "integer"
                                            },
                                            "id": {
                                                "type": "integer"
                                            },
                                            "parent_id": {
                                                "type": "integer",
                                                "nullable": true
                                            },
                                            "data": {
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Groups"
                ],
                "summary": "Create a new group",
                "operationId": "315d542826296a29326e3688714a0f9e",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "enabled": {
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Group created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "service_body_id": {
                                                "type": "integer"
                                            },
                                            "id": {
                                                "type": "integer"
                                            },
                                            "parent_id": {
                                                "type": "integer",
                                                "nullable": true
                                            },
                                            "data": {
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/groups/{group}": {
            "put": {
                "tags": [
                    "Groups"
                ],
                "summary": "Update a group",
                "operationId": "00f72590feb05e70f9bf1a3681d5db31",
                "parameters": [
                    {
                        "name": "group",
                        "in": "path",
                        "description": "ID of the group to update",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "enabled": {
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Group updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "service_body_id": {
                                                "type": "integer"
                                            },
                                            "id": {
                                                "type": "integer"
                                            },
                                            "parent_id": {
                                                "type": "integer",
                                                "nullable": true
                                            },
                                            "data": {
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "delete": {
                "tags": [
                    "Groups"
                ],
                "summary": "Delete a group",
                "operationId": "192b9a9076003b5febca75640aa23254",
                "parameters": [
                    {
                        "name": "group",
                        "in": "path",
                        "description": "ID of the group to delete",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Group deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Group not found"
                    }
                }
            },
            "patch": {
                "tags": [
                    "Groups"
                ],
                "summary": "Partially update a group",
                "operationId": "2cbb0317dd613697fece9c709601f1a1",
                "parameters": [
                    {
                        "name": "group",
                        "in": "path",
                        "description": "ID of the group to update",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "description": {
                                        "type": "string"
                                    },
                                    "enabled": {
                                        "type": "boolean"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Group updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "service_body_id": {
                                                "type": "integer"
                                            },
                                            "id": {
                                                "type": "integer"
                                            },
                                            "parent_id": {
                                                "type": "integer",
                                                "nullable": true
                                            },
                                            "data": {
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/groups/volunteers": {
            "get": {
                "tags": [
                    "Groups"
                ],
                "summary": "Get volunteers for a group",
                "description": "Retrieves volunteers assigned to a specific group",
                "operationId": "5719afa9a6c8933f9825b773357b298d",
                "parameters": [
                    {
                        "name": "groupId",
                        "in": "query",
                        "description": "ID of the group",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Group volunteers retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "service_body_id": {
                                            "type": "integer"
                                        },
                                        "id": {
                                            "type": "integer"
                                        },
                                        "parent_id": {
                                            "type": "integer",
                                            "nullable": true
                                        },
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            },
            "post": {
                "tags": [
                    "Groups"
                ],
                "summary": "Create or update volunteers for a group",
                "description": "Assigns or updates volunteers for a specific group",
                "operationId": "dc7921cf1f2ee1a7059ab3876072f0e4",
                "parameters": [
                    {
                        "name": "groupId",
                        "in": "query",
                        "description": "ID of the group",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "serviceBodyId",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "description": "Array of volunteer IDs to assign to the group",
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "type": "array",
                                "items": {
                                    "type": "integer"
                                }
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Group volunteers updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "service_body_id": {
                                            "type": "integer"
                                        },
                                        "id": {
                                            "type": "integer"
                                        },
                                        "parent_id": {
                                            "type": "integer",
                                            "nullable": true
                                        },
                                        "data": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/reports/mapmetrics": {
            "get": {
                "tags": [
                    "Reports"
                ],
                "summary": "Get map metrics report",
                "operationId": "1774cde841ae1eea08f3416f6b4e4dca",
                "parameters": [
                    {
                        "name": "service_body_id",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "date_range_start",
                        "in": "query",
                        "description": "Start date for the report range",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_range_end",
                        "in": "query",
                        "description": "End date for the report range",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "recurse",
                        "in": "query",
                        "description": "Whether to include metrics from child service bodies",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "format",
                        "in": "query",
                        "description": "Output format (csv or json)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "csv",
                                "json"
                            ]
                        }
                    },
                    {
                        "name": "event_id",
                        "in": "query",
                        "description": "Event ID for filtering metrics",
                        "required": false,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Map metrics report retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "total_calls": {
                                            "type": "integer"
                                        },
                                        "total_duration": {
                                            "type": "integer"
                                        },
                                        "average_duration": {
                                            "type": "number",
                                            "format": "float"
                                        },
                                        "calls_by_location": {
                                            "type": "object"
                                        },
                                        "calls_by_region": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            },
                            "text/plain": {
                                "schema": {
                                    "type": "string",
                                    "format": "binary"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/reports/metrics": {
            "get": {
                "tags": [
                    "Reports"
                ],
                "summary": "Get metrics report",
                "operationId": "a0a88f4b7a52799260ce58e16900635a",
                "parameters": [
                    {
                        "name": "service_body_id",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "date_range_start",
                        "in": "query",
                        "description": "Start date for the report range",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "date_range_end",
                        "in": "query",
                        "description": "End date for the report range",
                        "required": true,
                        "schema": {
                            "type": "string",
                            "format": "date"
                        }
                    },
                    {
                        "name": "recurse",
                        "in": "query",
                        "description": "Whether to include metrics from child service bodies",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Metrics report retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "total_calls": {
                                            "type": "integer"
                                        },
                                        "total_duration": {
                                            "type": "integer"
                                        },
                                        "average_duration": {
                                            "type": "number",
                                            "format": "float"
                                        },
                                        "calls_by_hour": {
                                            "type": "object"
                                        },
                                        "calls_by_day": {
                                            "type": "object"
                                        },
                                        "calls_by_volunteer": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/rootServer/serviceBodies": {
            "get": {
                "tags": [
                    "RootServer"
                ],
                "summary": "Get ServiceBodies",
                "description": "Get ServiceBodies",
                "operationId": "RootServer",
                "responses": {
                    "200": {
                        "description": "Data Returned",
                        "content": {
                            "application/json": {
                                "schema": {}
                            }
                        }
                    },
                    "400": {
                        "description": "Bad request"
                    },
                    "404": {
                        "description": "Resource Not Found"
                    }
                }
            }
        },
        "/api/v1/rootServer/serviceBodies/user": {
            "get": {
                "tags": [
                    "RootServer"
                ],
                "summary": "Get service bodies for authenticated user",
                "description": "Retrieves all service bodies that the authenticated user has access to from the root server",
                "operationId": "c70207430bb76d17d72e685bd9bba5ae",
                "responses": {
                    "200": {
                        "description": "Service bodies retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "name": {
                                                "type": "string"
                                            },
                                            "type": {
                                                "type": "string"
                                            },
                                            "parent_id": {
                                                "type": "integer",
                                                "nullable": true
                                            },
                                            "url": {
                                                "type": "string",
                                                "nullable": true
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/callHandling": {
            "get": {
                "tags": [
                    "CallHandling"
                ],
                "summary": "Get service body call handling configuration",
                "operationId": "1be35f4d527b55628cf7448c1c61bd02",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Call handling configuration retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "service_body_id": {
                                            "type": "integer"
                                        },
                                        "id": {
                                            "type": "integer"
                                        },
                                        "parent_id": {
                                            "type": "integer",
                                            "nullable": true
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "CallHandling"
                ],
                "summary": "Store or update service body call handling configuration",
                "operationId": "8aeb46b7c9dde787e9838fe5bc685c6e",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "enabled": {
                                        "type": "boolean"
                                    },
                                    "volunteer_search_enabled": {
                                        "type": "boolean"
                                    },
                                    "volunteer_search_radius": {
                                        "type": "integer"
                                    },
                                    "volunteer_search_max_results": {
                                        "type": "integer"
                                    },
                                    "volunteer_search_timeout": {
                                        "type": "integer"
                                    },
                                    "volunteer_search_retry_count": {
                                        "type": "integer"
                                    },
                                    "volunteer_search_retry_delay": {
                                        "type": "integer"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Call handling configuration saved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "service_body_id": {
                                            "type": "integer"
                                        },
                                        "id": {
                                            "type": "integer"
                                        },
                                        "parent_id": {
                                            "type": "integer",
                                            "nullable": true
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/session": {
            "post": {
                "tags": [
                    "Session"
                ],
                "summary": "Clear session data",
                "description": "Clears all cache, override, and call state data from the session",
                "operationId": "a266dcb6d15848947f09f068e7b2b3fa",
                "responses": {
                    "200": {
                        "description": "Session cleared successfully",
                        "content": {
                            "text/plain": {
                                "schema": {
                                    "type": "string",
                                    "example": "OK"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/settings/allowlist": {
            "get": {
                "tags": [
                    "Settings"
                ],
                "summary": "Get allowlist settings",
                "operationId": "a3039010f260fe1ecbd31a0501391eb5",
                "responses": {
                    "200": {
                        "description": "Allowlist settings retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "setting": {
                                                "type": "string"
                                            },
                                            "default": {
                                                "type": "string"
                                            },
                                            "description": {
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/settings/serviceBody/{serviceBodyId}": {
            "get": {
                "tags": [
                    "Settings"
                ],
                "summary": "Get service body configuration",
                "operationId": "c29651768c0d90be56d4b10541a46901",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "path",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Service body configuration retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "setting": {
                                                "type": "string"
                                            },
                                            "value": {
                                                "type": "string"
                                            },
                                            "default": {
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Settings"
                ],
                "summary": "Store or update service body configuration",
                "operationId": "58f5e0f344ea1d74748ad2bd0b067faa",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "path",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "fields": {
                                        "type": "array",
                                        "items": {
                                            "properties": {
                                                "setting": {
                                                    "type": "string"
                                                },
                                                "value": {
                                                    "type": "string"
                                                },
                                                "default": {
                                                    "type": "string"
                                                }
                                            },
                                            "type": "object"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Service body configuration saved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "languageSelections": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "settings": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "default": {
                                                        "type": "string"
                                                    },
                                                    "docs": {
                                                        "type": "string"
                                                    },
                                                    "key": {
                                                        "type": "string"
                                                    },
                                                    "source": {
                                                        "type": "string"
                                                    },
                                                    "value": {
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/settings": {
            "get": {
                "tags": [
                    "Settings"
                ],
                "summary": "Get system settings",
                "operationId": "8aaa48661ae8c0d536b1f6351008000d",
                "responses": {
                    "200": {
                        "description": "Settings retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "languageSelections": {
                                            "type": "array",
                                            "items": {
                                                "type": "string"
                                            }
                                        },
                                        "settings": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "default": {
                                                        "type": "string"
                                                    },
                                                    "docs": {
                                                        "type": "string"
                                                    },
                                                    "key": {
                                                        "type": "string"
                                                    },
                                                    "source": {
                                                        "type": "string"
                                                    },
                                                    "value": {
                                                        "type": "string"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/settings/localizations": {
            "get": {
                "tags": [
                    "Settings"
                ],
                "summary": "Get localization words for the current session language",
                "operationId": "bc8a7d9c6de78f59279a52432df54cc3",
                "responses": {
                    "200": {
                        "description": "Localization words retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "description": "Localization words for the current session language",
                                    "type": "object"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/settings/timezones": {
            "get": {
                "tags": [
                    "Settings"
                ],
                "summary": "Get list of all available timezones",
                "operationId": "ec86b8bb6f9a8e98798a1c4a70cf015f",
                "responses": {
                    "200": {
                        "description": "Timezone list retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "string"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/users/{user}": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get user details",
                "operationId": "441410b1cc74a171b525e9256eb950b0",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "Username of the user",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User details retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "User not found"
                    }
                }
            },
            "put": {
                "tags": [
                    "Users"
                ],
                "summary": "Update a user",
                "operationId": "3d4cf829a79d26d3261bcdf0ce926142",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "Username of the user to update",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "password": {
                                        "type": "string"
                                    },
                                    "permissions": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "service_bodies": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not authorized to update user"
                    }
                }
            },
            "delete": {
                "tags": [
                    "Users"
                ],
                "summary": "Delete a user",
                "operationId": "ebcac6929802a7622fb15b62167d7364",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "Username of the user to delete",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "User deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not authorized to delete user"
                    }
                }
            },
            "patch": {
                "tags": [
                    "Users"
                ],
                "summary": "Partially update a user",
                "operationId": "c3a4e1c0da03163bae22b1e252833fb7",
                "parameters": [
                    {
                        "name": "user",
                        "in": "path",
                        "description": "Username of the user to update",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "password": {
                                        "type": "string"
                                    },
                                    "permissions": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "service_bodies": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User updated successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not authorized to update user"
                    }
                }
            }
        },
        "/api/v1/users": {
            "get": {
                "tags": [
                    "Users"
                ],
                "summary": "Get all users",
                "operationId": "364f80bef646c395973e070b7cf186c4",
                "responses": {
                    "200": {
                        "description": "List of users retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            },
            "post": {
                "tags": [
                    "Users"
                ],
                "summary": "Create a new user",
                "operationId": "0ac6bf48c4781a22bcf4e570ce38f6d7",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "name",
                                    "username",
                                    "password",
                                    "permissions",
                                    "service_bodies"
                                ],
                                "properties": {
                                    "name": {
                                        "type": "string"
                                    },
                                    "username": {
                                        "type": "string"
                                    },
                                    "password": {
                                        "type": "string"
                                    },
                                    "permissions": {
                                        "type": "array",
                                        "items": {
                                            "type": "string"
                                        }
                                    },
                                    "service_bodies": {
                                        "type": "array",
                                        "items": {
                                            "type": "integer"
                                        }
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "User created successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not authorized to manage users"
                    }
                }
            }
        },
        "/api/v1/voicemail": {
            "get": {
                "tags": [
                    "Voicemails"
                ],
                "summary": "Get voicemails for a service body",
                "description": "Retrieves all voicemails associated with a specific service body",
                "operationId": "getVoicemails",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Successful operation",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "callsid": {
                                                        "type": "string",
                                                        "example": "CA1234567890"
                                                    },
                                                    "pin": {
                                                        "type": "string",
                                                        "example": "1234"
                                                    },
                                                    "from_number": {
                                                        "type": "string",
                                                        "example": "+1234567890"
                                                    },
                                                    "to_number": {
                                                        "type": "string",
                                                        "example": "+1987654321"
                                                    },
                                                    "event_time": {
                                                        "type": "string",
                                                        "format": "date-time",
                                                        "example": "2024-03-24T12:00:00Z"
                                                    },
                                                    "meta": {
                                                        "type": "object",
                                                        "example": {
                                                            "duration": "30",
                                                            "url": "https://example.com/voicemail.mp3"
                                                        }
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Service body not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Service body not found."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/voicemail/{voicemail}": {
            "delete": {
                "tags": [
                    "Voicemails"
                ],
                "summary": "Delete a voicemail",
                "description": "Deletes a specific voicemail by its call SID",
                "operationId": "deleteVoicemail",
                "parameters": [
                    {
                        "name": "serviceBodyId",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer",
                            "format": "int64"
                        }
                    },
                    {
                        "name": "voicemail",
                        "in": "path",
                        "description": "Call SID of the voicemail to delete",
                        "required": true,
                        "schema": {
                            "type": "string"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Voicemail deleted successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Voicemail deleted successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Unauthenticated."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Voicemail not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Voicemail not found."
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/api/v1/volunteers/download": {
            "get": {
                "tags": [
                    "Volunteers"
                ],
                "summary": "Download volunteer list",
                "operationId": "94aa5663c2d261032e0b4663f7dddb2b",
                "parameters": [
                    {
                        "name": "service_body_id",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    },
                    {
                        "name": "recurse",
                        "in": "query",
                        "description": "Whether to include volunteers from child service bodies",
                        "required": false,
                        "schema": {
                            "type": "boolean"
                        }
                    },
                    {
                        "name": "fmt",
                        "in": "query",
                        "description": "Output format (csv or json)",
                        "required": false,
                        "schema": {
                            "type": "string",
                            "enum": [
                                "csv",
                                "json"
                            ]
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Volunteer list retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "oneOf": [
                                        {
                                            "type": "array",
                                            "items": {
                                                "properties": {
                                                    "name": {
                                                        "type": "string"
                                                    },
                                                    "number": {
                                                        "type": "string"
                                                    },
                                                    "gender": {
                                                        "type": "string"
                                                    },
                                                    "responder": {
                                                        "type": "boolean"
                                                    },
                                                    "type": {
                                                        "type": "string"
                                                    },
                                                    "language": {
                                                        "type": "array",
                                                        "items": {
                                                            "type": "string"
                                                        }
                                                    },
                                                    "notes": {
                                                        "type": "string"
                                                    },
                                                    "service_body_id": {
                                                        "type": "integer"
                                                    },
                                                    "shift_info": {
                                                        "type": "object"
                                                    }
                                                },
                                                "type": "object"
                                            }
                                        },
                                        {
                                            "description": "CSV file download",
                                            "type": "string",
                                            "format": "binary"
                                        }
                                    ]
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/callHandling/routingEnabled": {
            "get": {
                "tags": [
                    "CallHandling"
                ],
                "summary": "Get service bodies enabled for volunteer routing",
                "operationId": "b9d55d60078d04233ada03d71ecad00e",
                "responses": {
                    "200": {
                        "description": "List of service bodies enabled for volunteer routing",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "name": {
                                                "type": "string"
                                            },
                                            "description": {
                                                "type": "string"
                                            },
                                            "type": {
                                                "type": "string"
                                            },
                                            "url": {
                                                "type": "string"
                                            },
                                            "helpline": {
                                                "type": "string"
                                            },
                                            "world_id": {
                                                "type": "string"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/v1/volunteers/schedule": {
            "get": {
                "tags": [
                    "Volunteers"
                ],
                "summary": "Get volunteer helpline schedule",
                "operationId": "23b05f33df56a822428f50d42f88028a",
                "parameters": [
                    {
                        "name": "service_body_id",
                        "in": "query",
                        "description": "ID of the service body",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Volunteer schedule retrieved successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "type": "array",
                                    "items": {
                                        "properties": {
                                            "id": {
                                                "type": "integer"
                                            },
                                            "name": {
                                                "type": "string"
                                            },
                                            "number": {
                                                "type": "string"
                                            },
                                            "gender": {
                                                "type": "string"
                                            },
                                            "responder": {
                                                "type": "boolean"
                                            },
                                            "type": {
                                                "type": "string"
                                            },
                                            "language": {
                                                "type": "array",
                                                "items": {
                                                    "type": "string"
                                                }
                                            },
                                            "notes": {
                                                "type": "string"
                                            },
                                            "shift_info": {
                                                "type": "object"
                                            }
                                        },
                                        "type": "object"
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "BearerAuth": {
                "type": "http",
                "bearerFormat": "JWT",
                "scheme": "bearer"
            }
        }
    },
    "tags": [
        {
            "name": "Volunteers",
            "description": "Volunteer configuration management endpoints"
        },
        {
            "name": "Events",
            "description": "Event status management endpoints"
        },
        {
            "name": "Groups",
            "description": "Group management endpoints"
        },
        {
            "name": "Reports",
            "description": "Metrics and reporting endpoints"
        },
        {
            "name": "RootServer",
            "description": "Root server integration endpoints"
        },
        {
            "name": "Session",
            "description": "Session management endpoints"
        },
        {
            "name": "Settings",
            "description": "System settings management endpoints"
        },
        {
            "name": "Users",
            "description": "User management endpoints"
        },
        {
            "name": "Voicemails",
            "description": "API Endpoints for managing voicemails"
        },
        {
            "name": "Authentication",
            "description": "Authentication"
        },
        {
            "name": "Cache",
            "description": "Cache"
        },
        {
            "name": "CallHandling",
            "description": "CallHandling"
        }
    ],
    "security": [
        {
            "BearerAuth": []
        }
    ]
}